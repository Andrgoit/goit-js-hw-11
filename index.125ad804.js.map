{"mappings":"AACA,MAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,YAAaH,SAASC,cAAc,eAGtCH,EAAKC,KAAKK,iBAAiB,UAO3B,SAAqBC,GACnBA,EAAEC,iBACFR,EAAKI,QAAQK,UAAY,GAEzBC,EAAcC,MAAQJ,EAAEK,cAAcC,SAASC,YAAYH,MAAMI,OACjEL,EAAcM,YAEc,KAAxBN,EAAcC,OAGhBD,EACGO,cACAC,MAAKC,IACJnB,EAAKK,YAAYe,UAAUC,OAAO,aAClCC,EAAaH,MAEdI,OAAMC,IACLC,QAAQC,IAAIF,MAGlB,UA1BFxB,EAAKK,YAAYC,iBAAiB,SA6BlC,WACEN,EAAKK,YAAYe,UAAUO,IAAI,aAC/BjB,EAAcO,cAAcC,MAAKC,IAC/BnB,EAAKK,YAAYe,UAAUC,OAAO,aAClCC,EAAaH,SA/BjBnB,EAAKK,YAAYe,UAAUO,IAAI,aAE/B,MAAMjB,EAAgB,ICTP,MAMbO,cACE,MAAMW,EAAe,IAAIC,gBAAgB,CACvCC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,EACVC,KAAMC,KAAKD,OAGb,OAAOE,MAAM,qEAA4BD,KAAKE,eAAeT,KAC1DV,MAAKC,IACJ,IAAKA,EAASmB,GACZ,MAAM,IAAIC,MAAMpB,EAASqB,QAG3B,OADAL,KAAKM,gBACEtB,EAASuB,UAEjBnB,OAAMC,IACLC,QAAQC,IAAIF,MAIlBiB,gBACEN,KAAKD,MAAQ,EAGflB,YACEmB,KAAKD,KAAO,EAGVvB,YACF,OAAOwB,KAAKE,YAGV1B,UAAMgC,GACRR,KAAKE,YAAcM,EAxCrBC,cACET,KAAKE,YAAc,GACnBF,KAAKD,KAAO,IDuChB,SAASZ,EAAauB,GAEpB,MAAMC,EAAWD,EAAOE,KACxB,GAAwB,IAApBD,EAASE,OAAc,CACzB,MAAMC,EAASH,EACZI,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,yCACHN,WAAsBE,8FAGdC,+DAGAC,kEAGGC,mEAGCC,kCAMnBC,KAAK,IACR1D,EAAKI,QAAQuD,mBAAmB,YAAaV,QAE7CxB,QAAQC,IAAI","sources":["src/index.js","src/js/api-service.js"],"sourcesContent":["import ApiService from './js/api-service';\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nrefs.form.addEventListener('submit', formHandler);\nrefs.loadMoreBtn.addEventListener('click', loadMore);\n\nrefs.loadMoreBtn.classList.add('is-hidden');\n\nconst newApiService = new ApiService();\n\nfunction formHandler(e) {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n\n  newApiService.value = e.currentTarget.elements.searchQuery.value.trim();\n  newApiService.resetPage();\n\n  if (newApiService.value !== '') {\n    // console.log(newApiService.value);\n\n    newApiService\n      .fetchingUrl()\n      .then(response => {\n        refs.loadMoreBtn.classList.remove('is-hidden');\n        markupImages(response);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n  return;\n}\n\nfunction loadMore() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n  newApiService.fetchingUrl().then(response => {\n    refs.loadMoreBtn.classList.remove('is-hidden');\n    markupImages(response);\n  });\n}\n\nfunction markupImages(images) {\n  //   console.log(images);\n  const imageArr = images.hits;\n  if (imageArr.length !== 0) {\n    const markup = imageArr\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes: </b>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views: </b>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments: </b>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: </b>${downloads}\n    </p>\n  </div>\n</div>`;\n        }\n      )\n      .join('');\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    console.log('ничего не найдено');\n  }\n}\n","const BASE_URL = 'https://pixabay.com/api/';\nconst KEY = '28166430-49d596e3415ce5cac11c6cb0f';\n\nexport default class ApiService {\n  constructor() {\n    this.searchValue = '';\n    this.page = 1;\n  }\n\n  fetchingUrl() {\n    const searchParams = new URLSearchParams({\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 3,\n      page: this.page,\n    });\n\n    return fetch(`${BASE_URL}?key=${KEY}&q=${this.searchValue}&${searchParams}`)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        this.incrementPage();\n        return response.json();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get value() {\n    return this.searchValue;\n  }\n\n  set value(newSearchValue) {\n    this.searchValue = newSearchValue;\n  }\n}\n"],"names":["$1f0dc3b9307be026$var$refs","form","document","querySelector","gallery","loadMoreBtn","addEventListener","e","preventDefault","innerHTML","$1f0dc3b9307be026$var$newApiService","value","currentTarget","elements","searchQuery","trim","resetPage","fetchingUrl","then","response","classList","remove","$1f0dc3b9307be026$var$markupImages","catch","error","console","log","add","searchParams","URLSearchParams","image_type","orientation","safesearch","per_page","page","this","fetch","searchValue","ok","Error","status","incrementPage","json","newSearchValue","constructor","images","imageArr","hits","length","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML"],"version":3,"file":"index.125ad804.js.map"}